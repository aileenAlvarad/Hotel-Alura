<!DOCTYPE html>
<html lang="en">
<head>
<!-- META SECTION -->
<title>Actualizar Sistema de Reservación</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="favicon.ico" type="image/x-icon" />



<link rel="stylesheet" type="text/css" id="theme"
	href="css/theme-default.css" />

</head>
<body>

	
	<div class="page-content">

		<!-- START X-NAVIGATION VERTICAL -->
		<ul class="x-navigation x-navigation-horizontal x-navigation-panel">
			<!-- TOGGLE NAVIGATION -->
			<li class="xn-icon-button"><a href="#"
				class="x-navigation-minimize"><span class="fa fa-dedent"></span></a>
			</li>
			<!-- END TOGGLE NAVIGATION -->
					<!-- SIGN OUT -->
			<li class="xn-icon-button pull-right"><a href="#"
				class="mb-control" data-box="#mb-signout"><span
					class="fa fa-sign-out"></span></a></li>
			<!-- END SIGN OUT -->
		
		</ul>
		<!-- END X-NAVIGATION VERTICAL -->

		<!-- PAGE CONTENT WRAPPER -->
		<div class="page-content-wrap">

			<div class="row">
				<div class="col-md-12">

					<form class="form-horizontal">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">
									<strong>Actualizar Sistema de Reservaciones </strong>
								</h3>
								<ul class="panel-controls">
									<li><a href="#" class="panel-remove"><span
											class="fa fa-times"></span></a></li>
								</ul>
							</div>
							<div class="panel-body"></div>
							<div class="panel-body"></div>

								<div class="form-group">
								</div>

								<div class="form-group">
								</div> 
								
								<div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Id</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                <input type="text" id="id" class="form-control" disabled/>
                                            </div>                                            
                                            <span class="help-block"></span>
                                        </div>
                                    </div>

								<div class="form-group">
									<label class="col-md-3 col-xs-12 control-label">Fecha de Check In</label>
									<div class="col-md-6 col-xs-12">
										<div class="input-group">
											<span class="input-group-addon"><span
												class="fa fa-calendar"></span></span> <input type="text" id="checkIn"
												class="form-control datepicker" value="2023-01-01">
										</div>
										<span class="help-block">Haz clic en el campo de entrada para obtener el selector de fechas</span>
									</div>
								</div>

								<div class="form-group">
									<label class="col-md-3 col-xs-12 control-label">Fecha de Check Out</label>
									<div class="col-md-6 col-xs-12">
										<div class="input-group">
											<span class="input-group-addon"><span
												class="fa fa-calendar"></span></span> <input type="text" id="checkOut"
												class="form-control datepicker" value="2023-01-01">
										</div>
										<span class="help-block">Haz clic en el campo de entrada para obtener el selector de fechas</span>
									</div>
								</div>

									<div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Valor de la Reservación</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                <input type="text" id="valorReserva" class="form-control"/ >
                                            </div>                                            
                                            <span class="help-block">$</span>
                                        </div>
                                    </div>

								<div class="form-group">
									<label class="col-md-3 col-xs-12 control-label">Método de Pago</label>
									<div class="col-md-6 col-xs-12">
										<select class="form-control " id="formaPago">
											<option>transferencia</option>
											<option>Dinero en efectivo</option>
										</select>
										<br /><br /><br /><br />
								<div class="form-group">
								</div>
 

							</div>
							<div class="panel-footer">
								<button class="btn btn-default" >Limpiar Formulario</button> 
								<a href="/hotel/buscar">Ir a buscar Reservaciones o huespédes</a>
								<input class="btn btn-primary pull-right" onclick="actualizarInformacion()" type="button" value="Modificar" /> 
								
								
							</div>
						</div>
					</form>

				</div>
			</div>

		</div>
		<!-- END PAGE CONTENT WRAPPER -->
	</div>
	<!-- END PAGE CONTENT -->
	</div>
	<!-- END PAGE CONTAINER -->

	

	<!-- START PRELOADS -->
	<audio id="audio-alert" src="audio/alert.mp3" preload="auto"></audio>
	<audio id="audio-fail" src="audio/fail.mp3" preload="auto"></audio>
	<!-- END PRELOADS -->

	<!-- START SCRIPTS -->
	<!-- START PLUGINS -->
	<script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="js/plugins/jquery/jquery-ui.min.js"></script>
	<script type="text/javascript"
		src="js/plugins/bootstrap/bootstrap.min.js"></script>
	<!-- END PLUGINS -->

	<!-- THIS PAGE PLUGINS -->
	<script type='text/javascript' src='js/plugins/icheck/icheck.min.js'></script>
	<script type="text/javascript"
		src="js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js"></script>

	<script type="text/javascript"
		src="js/plugins/bootstrap/bootstrap-datepicker.js"></script>
	<script type="text/javascript"
		src="js/plugins/bootstrap/bootstrap-file-input.js"></script>
	<script type="text/javascript"
		src="js/plugins/bootstrap/bootstrap-select.js"></script>
	<script type="text/javascript"
		src="js/plugins/tagsinput/jquery.tagsinput.min.js"></script>
	<!-- END THIS PAGE PLUGINS -->

	<script type="text/javascript" src="js/settings.js"></script>

	<script type="text/javascript" src="js/plugins.js"></script>
	<script type="text/javascript" src="js/actions.js"></script>
	<!-- END SCRIPTS --> 
	
	<script>
	function actualizarInformacion() {
		let postObj = {   
				id: document.getElementById("id").value, 
			    checkIn: document.getElementById("checkIn").value, 
			    checkOut: document.getElementById("checkOut").value, 
			    valorReserva: document.getElementById("valorReserva").value,
			    formaPago: document.getElementById("formaPago").value
			}
			
	    let post = JSON.stringify(postObj)
		const url = "/hotel/reservacion/"
		let xhr = new XMLHttpRequest()
		xhr.open('PUT', url, true)
		xhr.setRequestHeader('Content-type', 'application/json; charset=UTF-8')
		xhr.send(post);
		xhr.onload = function () {
		    if(xhr.status === 200) {
		      //  document.getElementById("response").innerHTML = xhr.response; 
		        window.alert("Tu informacion se guardó con exito! :)");
		    }
		}
	}  
	
	function cargarReservacion(){
		const urlParams = new URLSearchParams(window.location.search);
		const id = urlParams.get('id'); 
		const url = "/hotel/buscar/reservacion/" + id
       		let xhr = new XMLHttpRequest()
       		xhr.open('GET', url, true)
       		xhr.setRequestHeader('Content-type', 'application/json; charset=UTF-8')
       		xhr.onload = function () {
       		    if(xhr.status === 200) {
       		        //document.getElementById("consultarend").innerHTML = xhr.response;
       		     	asignarValoresAReservacion(JSON.parse(xhr.response))
       		    }
       		}
        	xhr.send();
		
	} 
	function asignarValoresAReservacion(reservacion){
		 document.getElementById("id").value = reservacion["id"];  
		 document.getElementById("checkIn").value = reservacion["checkIn"]; 
		 document.getElementById("checkOut").value = reservacion["checkOut"]; 
		 document.getElementById("valorReserva").value = reservacion["valorReserva"]; 
		 document.getElementById("formaPago").value = reservacion["formaPago"]; 
		 
	}

	window.addEventListener('load', function() { //Cuando carga el html se manda a llamar a la funcion
    	//init() 
    	cargarReservacion()
    }); 
</script>	  
</body>
</html>






